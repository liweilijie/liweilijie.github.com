<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>liwei.tk</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="李伟">
		<meta name="author" content="李伟的维基">

		<!-- Le styles -->
		<link href="assets/css/bootstrap.css" rel="stylesheet">
		<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
		<!-- display by liw for the padding at the top <link href="assets/css/docs.css" rel="stylesheet">-->
		<link href="assets/css/docs.css" rel="stylesheet">
		<link href="style.css" rel="stylesheet">
		<link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Le fav and touch icons -->
		<link rel="shortcut icon" href="../assets/ico/favicon.ico">
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

		<link type="text/css" rel="stylesheet" href="syntaxhighlighter/css/shCore.css" /> 
		<link type="text/css" rel="stylesheet" href="syntaxhighlighter/css/shThemeRDark.css" /> 
		<script type="text/javascript" src="syntaxhighlighter/js/shCore.js"></script> 
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPython.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushBash.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushCpp.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPowerShell.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushXml.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPlain.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushSql.js"></script>
		<script type="text/javascript">
			SyntaxHighlighter.defaults['gutter'] = true;
			SyntaxHighlighter.all();
			</script> 
			
<!-- add the google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25233855-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body data-spy="scroll" data-target=".subnav" data-offset="50">

	<!--<div class="span10 well pricehover">-->

		<!-- ==================== start navbar ================== -->
		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fuid">
					<!-- old is : <div class="container"> and fixed by to 'fuid style' -->
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="#">Liwei.tk</a>
						<div class="nav-collapse">
							<ul class="nav">
								<li><a href="index.html">Home</a></li>
								<!-- Program sub projects  -->
								<li class="dropdown">
								<a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">Programs <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="c.html">C</a></li>
									<li><a href="cpp.html">Cpp</a></li>
									<li><a href="shell.html">Shell</a></li>
									<li class="divider"></li>
									<li class="nav-header">Others</li>
									<li><a href="python.html">Python</a></li>
									<li><a href="expect.html">Expect</a></li>
									<li><a href="vc.html">Vc</a></li>
								</ul>
								</li>
								<!-- Os sub projects  -->
								<li class="dropdown">
								<a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">Os <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="linux.html">Linux</a></li>
									<li class="divider"></li>
									<li><a href="windows.html">Windows</a></li>
								</ul>
								</li>

								<!-- vim -->
								<li class="active"><a href="vim.html">Vim</a></li>
								<li><a href="#">Link</a></li>
								<li><a href="#">Link</a></li>
								<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="#">Action</a></li>
									<li><a href="#">Another action</a></li>
									<li><a href="#">Something else here</a></li>
									<li class="divider"></li>
									<li class="nav-header">Nav header</li>
									<li><a href="#">Separated link</a></li>
									<li><a href="#">One more separated link</a></li>
								</ul>
								</li>
							</ul>
							<form class="navbar-search pull-left" action="">
								<input type="text" class="search-query span2" placeholder="Search">
							</form>
							<ul class="nav pull-right">
								<li><a href="#">Link</a></li>
								<li class="divider-vertical"></li>
								<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="#">Action</a></li>
									<li><a href="#">Another action</a></li>
									<li><a href="#">Something else here</a></li>
									<li class="divider"></li>
									<li><a href="#">Separated link</a></li>
								</ul>
								</li>
							</ul>
						</div><!-- /.nav-collapse -->
					</div>
				</div><!-- /navbar-inner -->
			</div><!-- /navbar -->
			<!--</div>-->

		<div class="container">

			<!--span2 + span10 that's really content-->
			<div class="row">

						<!--left nav-->
						<div class="span3 side-nav">
							<div class="well sidebar-nav">
								<h3><a href="vim.html">Vim</a></h3>
								<ul class="nav nav-list">
									<li class="nav-header">基本操作</li>
									<li> <a href="http://vimcdoc.sourceforge.net/doc/help.html">vim帮助文档</a></li>
									<li> <a href="vim_install_reinstall_update.html">vim 安装 重装 升级</a></li>
									<li> <a href="vim_for_fc3_install.html">在fedora core 3 下面安装vim</a></li>
									<li> <a href="vim_remote_edite_file.html">vim 远程操作文件</a></li>
									<li> <a href="vim_delete_enter_of_win.html">在vim之中删除不爽的字符^M</a></li>
									<li> <a href="vim_github_wiki.html">创建我的维基站点</a></li>
									<li> <a href="vim_set_list.html">set list查看不可见字符</a></li>
									<li> <a href="vim_convert_file_format.html">vim中转换文件的编码格式</a></li>
									<li> <a href="vim_memo.html">vim.备忘</a></li>
									<li> <a href="vim_example_quickly.html">vim快速编辑</a></li>
									<li> <a href="vim_ereg_format.html">vim等号整理和指定区域查找替换</a></li>
									<li> <a href="vim_gvim_conflict_ctrl_v.html">gvim的Ctrl+v粘贴/Visual块模式冲突</a></li>
									<li> <a href="vim_replese_number.html">vim 将前几行的几个字符去掉</a></li>
									<li> <a href="vim_sophisticated_example.html">vim 又见经典汇总</a></li>
									<li> <a href="vim_script_programming.html">vim script programming</a></li>
									<li> <a href="vim_match_mul_line.html">vim正则之多行匹配</a></li>
									<li class="nav-header">应用相关</li>
									<li> <a href="vim_motion.html">vim motion.高效编辑</a></li>
									<li> <a href="vim_quick_reference_card.html">vim quick reference card</a></li>
									<li> <a href="vim_global_delete_cmd.html">vim g 删除奇数行的解释</a></li>
									<li> <a href="vim_ctrl_o.html">vim 打开最近打开的文件</a></li>
									<li> <a href="vim_replace_total.html">vim 中常用的替换模式总结</a></li>
									<li> <a href="vim_regex_detail.html">vim 正则表达式简解</a></li>
									<li> <a href="vim_delete_spaceline.html">vim删除空行</a></li>
									<li> <a href="vim_defined_vim_taglist.html">自定义taglist显示设置</a></li>
									<li> <a href="vim_basic_regex_expression.html">vim 正则</a></li>
									<!--<li class="nav-header">Sidebar</li>-->
									<!--<li class="active"><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li class="nav-header">Sidebar</li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
									<!--<li><a href="#">vim</a></li>-->
								</ul>
							</div> <!-- ...well -->
						</div> <!-- --span  -->
				<!-- right contnet -->

				<div class="span9" data-spy="scroll" >
					<div class="gsearch"></div>
					<div class="content">
						<div class="alert top-nav"><a href="index.html">首页</a>&nbsp;&gt;&nbsp;<a href="vim.html">Vim</a></div>
						
<h1>vim.正则</h1>
<div class="toc">
<ul>
<li><a href="#toc_0.0.1">1. 元字符</a>
<li><a href="#toc_0.0.2">2. 表示数量的元字符</a>
<li><a href="#toc_0.0.3">3. 表示位置的符号</a>
<li><a href="#toc_0.0.4">4. 替换变量</a>
<li><a href="#toc_0.0.5">5. 懒惰模式</a>
<li><a href="#toc_0.0.6">6. 函数式</a>
<li><a href="#toc_0.0.7">7. 示例</a>
</ul>
</ul>
</ul>
</div>

<h3 id="toc_0.0.1">1. 元字符</h3>

<ul>
<li>
<code>.</code>  匹配任意一个字符 

<li>
<code>[abc]</code> 匹配方括号中的任意一个字符。可以使用-表示字符范围， 如[a-z0-9]匹配小写字母和阿拉伯数字。 

<li>
<code>[^abc]</code> 在方括号内开头使用 <strong>^</strong> 符号，表示匹配除方括号中字符之外的任意字符。 

<li>
<code>\d</code> 匹配阿拉伯数字，等同于 <strong>[0-9]</strong> 。 

<li>
<code>\D</code> 匹配阿拉伯数字之外的任意字符，等同于 <strong>[^0-9]</strong> 。 

<li>
<code>\x</code> 匹配十六进制数字，等同于 <strong>[0-9A-Fa-f]</strong> 。 

<li>
<code>\X</code> 匹配十六进制数字，等同于 <strong>[^0-9A-Fa-f]</strong> 。 

<li>
<code>\w</code> 匹配单词字母，等同于 <strong>[0-9A-Za-z_]</strong> 。 

<li>
<code>\W</code> 匹配单词字母之外的任意字符，等同于 <strong>[^0-9A-Za-z_]</strong> 。 

<li>
<code>\t</code> 匹配 <strong>&lt;TAB&gt;</strong> 字符。 

<li>
<code>\s</code> 匹配空白字符，等同于[ /t]。 

<li>
<code>\S</code> 匹配非空白字符，等同于[^ /t]。 

<li>
<code>\a</code> 所有的字母字符. 等同于[a-zA-Z]

<li>
<code>\l</code> 小写字母 [a-z]

<li>
<code>\L</code> 非小写字母 [^a-z]

<li>
<code>\u</code> 大写字母 [A-Z]

<li>
<code>\U</code> 非大写字母 [^A-Z]

</ul>
 
<h3 id="toc_0.0.2">2. 表示数量的元字符</h3>

<ul>
<li>
<code>*</code> 匹配0-任意个 

<li>
<code>\+</code> 匹配1-任意个 

<li>
<code>\?</code> 匹配0-1个 

<li>
<code>\{n,m}</code> 匹配n-m个 

<li>
<code>\{n}</code> 匹配n个 

<li>
<code>\{n,}</code> 匹配n-任意个 

<li>
<code>\{,m}</code> 匹配0-m个 

<li>
<code>\_.</code> 匹配包含换行在内的所有字符

<li>
<code>\{-}</code> 表示前一个字符可出现零次或多次，但在整个正则表达式可以匹配成功的前提下，匹配的字符数越少越好

<li>
<code>\=</code> 匹配一个可有可无的项

<li>
<code>\_s</code> 匹配空格或断行

<li>
<code>\*</code> 匹配  ***  字符。 

<li>
<code>\.</code> 匹配 <strong>.</strong> 字符。 

<li>
<code>\\</code> 匹配 <strong>\</strong> 字符。 

<li>
<code>//</code> 匹配 <strong>/</strong> 字符。 

<li>
<code>\[</code> 匹配 <strong>[</strong> 字符。 

</ul>
 
<h3 id="toc_0.0.3">3. 表示位置的符号</h3>

<ul>
<li>
<code>$</code> 匹配行尾 

<li>
<code>^</code> 匹配行首 

<li>
<code>\&lt;</code> 匹配单词词首 

<li>
<code>\&gt;</code> 匹配单词词尾 

</ul>
 
<h3 id="toc_0.0.4">4. 替换变量</h3>

<p>
在正规表达式中使用 <strong>\(</strong> 和 <strong>\)</strong> 符号括起正规表达式，即可在后面使用 <strong>\1</strong> 、 <strong>\2</strong> 等变量来访问 <strong>\(</strong>  和 <strong>\)</strong> 中的内容。
</p>
 
<h3 id="toc_0.0.5">5. 懒惰模式</h3>

<ul>
<li>
<code>\{-n,m}</code> 与 <code>\{n,m}</code> 一样，尽可能少次数地重复

<li>
<code>\{-}</code> 匹配它前面的项一次或0次, 尽可能地少

<li>
<code>\|</code>  "或"操作符

<li>
<code>\&amp;</code>  并列

</ul>
 
<h3 id="toc_0.0.6">6. 函数式</h3>
<ul>
<li>
:s/替换字符串//=函数式

</ul>
 
<p>
在函数式中可以使用 <code>submatch(1)</code>、 <code>submatch(2)</code> 等来引用 <code>\1</code> 、<code>\2</code> 等的内容，而 <code>submatch(0)</code> 可以引用匹配的整个内容。
</p>
 
<h3 id="toc_0.0.7">7. 示例</h3>

<ol>
<li>
去掉所有的行尾空格 <code>:%s/\s\+$//</code> : 

<ul>
<li>
<code>%</code>	表示在整个文件范围内进行替换;

<li>
<code>\s</code>	表示空白字符（空格和制表符）;

<li>
<code>\+</code>	对前面的字符匹配一次或多次（越多越好）. 

</ul>
<li>
去掉所有的空白行：<code>:%s/\(\s*\n\)\+/\r/</code>。

<ul>
<li>
这回多了<code>\(</code>、<code>\)</code>、<code>\n</code>、<code>\r</code>和 <code>*</code>。

<li>
<code>*</code>	代表对前面的字符（此处为<code>\s</code>）匹配零次或多次（越多越好；使用<code>\*</code>表示单纯的<code>*</code>字符）;

<li>
<code>\n</code>	代表换行符;

<li>
<code>\r</code>	代表回车符;

<li>
<code>\(</code>和<code>\)</code>	对表达式进行分组，使其被视作一个不可分割的整体。因此，这个表达式的完整意义是，把连续的换行符（包含换行符前面可能有的连续空白字符）替换成为一个单个的换行符。唯一很特殊的地方是，在模式中使用的是<code>\n</code>，而被替换的内容中却不能使用<code>\n</code>，而只能使用<code>\r</code>。原因是历史造成的，详情如果有兴趣的话可以查看<code>:help NL-used-for-Nul</code>。 

</ul>
<li>
去掉所有的<code>//</code>注释：<code>:%s!\s*//.*!!</code>。

<ul>
<li>
首先可以注意到，这儿分隔符改用了<code>!</code>，原因是在模式或字符串部分使用了<code>/</code>字符，不换用其他分隔符的话就得在每次使用<code>/</code>字符本身时写成<code>//</code>，上面的命令得写成<code>:%s//s*////.*//</code>，可读性较低。命令本身倒是相当简单，用过正则表达式的人估计都知道<code>.</code>匹配表示除换行符之外的任何字符吧。 

</ul>
<li>
去掉所有的<code>/* */</code>注释：<code>:%s!\s*//*\_./{-}/*//s*! !g</code>。

<ul>
<li>
这个略有点复杂了，用到了几个不太常用的 Vim 正则表达式特性。

<li>
<code>\_.</code>匹配包含换行在内的所有字符；

<li>
<code>/{-}</code> 表示前一个字符可出现零次或多次，但在整个正则表达式可以匹配成功的前提下，匹配的字符数越少越好；

<li>
标志<code>g</code>表示一行里可以匹配和替换多次。替换的结果是个空格的目的是保证像“int/* space not necessary around comments */main()”这样的表达式在替换之后仍然是合法的。 

</ul>
<li>
<code>:g/^/s*$/d</code>    删除只有空白的行

<li>
<code>:s//(/w/+/)/s/+/(/w/+/)//2/t/1</code>   将 data1 data2 修改为 data2 data1

<li>
<code>:%s//(/w/+/), /(/w/+/)//2 /1/</code>    将 Doe, John 修改为 John Doe

<li>
<code>:%s//&lt;id/&gt;//=line(".")</code>   将各行的 id 字符串替换为行号

<li>
<code>:%s//(^/&lt;/w/+/&gt;/)//=(line(".")-10) .".". submatch(1)</code>    将每行开头的单词替换为(行号-10).单词的格式,如第11行的word替换成1. word

<li>
排序 <code>:/OB/+1,$!sort</code>

</ol>

					</div>
				</div>
			</div> <!-- really content end -->

			<div class="row footer">
				<hr />
				<a href="index.html">首页</a>
				<a href="about.html"> | 关于</a>
				<a href="links.html"> | 链接</a>
				<a href="contact.html"> | 链接</a>
			</div>

		</div>

		<!-- Le javascript ================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<!-- display by liw <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>-->
		<!--<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>-->
		<script src="assets/js/jquery.js"></script>
		<script src="assets/js/google-code-prettify/prettify.js"></script>
		<script src="assets/js/bootstrap-transition.js"></script>
		<script src="assets/js/bootstrap-alert.js"></script>
		<script src="assets/js/bootstrap-modal.js"></script>
		<script src="assets/js/bootstrap-dropdown.js"></script>
		<script src="assets/js/bootstrap-scrollspy.js"></script>
		<script src="assets/js/bootstrap-tab.js"></script>
		<script src="assets/js/bootstrap-tooltip.js"></script>
		<script src="assets/js/bootstrap-popover.js"></script>
		<script src="assets/js/bootstrap-button.js"></script>
		<script src="assets/js/bootstrap-collapse.js"></script>
		<script src="assets/js/bootstrap-carousel.js"></script>
		<script src="assets/js/bootstrap-typeahead.js"></script>
		<script src="assets/js/application.js"></script>
		<script src="assets/js/liwei.js"></script>


	</body>
</html>
