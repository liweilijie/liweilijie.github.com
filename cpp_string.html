<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>liwei.tk</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="李伟">
		<meta name="author" content="李伟的维基">

		<!-- Le styles -->
		<link href="assets/css/bootstrap.css" rel="stylesheet">
		<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
		<!-- display by liw for the padding at the top <link href="assets/css/docs.css" rel="stylesheet">-->
		<link href="assets/css/docs.css" rel="stylesheet">
		<link href="style.css" rel="stylesheet">
		<link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Le fav and touch icons -->
		<link rel="shortcut icon" href="../assets/ico/favicon.ico">
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

		<link type="text/css" rel="stylesheet" href="syntaxhighlighter/css/shCore.css" /> 
		<link type="text/css" rel="stylesheet" href="syntaxhighlighter/css/shThemeRDark.css" /> 
		<script type="text/javascript" src="syntaxhighlighter/js/shCore.js"></script> 
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPython.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushBash.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushCpp.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPowerShell.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushXml.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushPlain.js"></script>
		<script type="text/javascript" src="syntaxhighlighter/js/shBrushSql.js"></script>
		<script type="text/javascript">
			SyntaxHighlighter.defaults['gutter'] = true;
			SyntaxHighlighter.all();
			</script> 
			
<!-- add the google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25233855-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

		</head>

		<body data-spy="scroll" data-target=".subnav" data-offset="50">

			<!--<div class="span10 well pricehover">-->

				<!-- ==================== start navbar ================== -->
				<div class="navbar">
					<div class="navbar-inner">
						<div class="container-fuid">
							<!-- old is : <div class="container"> and fixed by to 'fuid style' -->
								<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</a>
								<a class="brand" href="#">Liwei.tk</a>
								<div class="nav-collapse">
									<ul class="nav">
										<li><a href="index.html">Home</a></li>
										<!-- Program sub projects  -->
										<li class="dropdown active">
										<a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">Programs <b class="caret"></b></a>
										<ul class="dropdown-menu">
											<li><a href="c.html">C</a></li>
											<li><a href="cpp.html">Cpp</a></li>
											<li><a href="shell.html">Shell</a></li>
											<li class="divider"></li>
											<li class="nav-header">Others</li>
											<li><a href="python.html">Python</a></li>
											<li><a href="expect.html">Expect</a></li>
											<li><a href="vc.html">Vc</a></li>
										</ul>
										</li>
										<!-- Os sub projects  -->
										<li class="dropdown">
										<a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">Os <b class="caret"></b></a>
										<ul class="dropdown-menu">
											<li><a href="linux.html">Linux</a></li>
											<li class="divider"></li>
											<li><a href="windows.html">Windows</a></li>
										</ul>
										</li>

										<!-- vim -->
										<li><a href="vim.html">Vim</a></li>
										<li><a href="#">Link</a></li>
										<li><a href="#">Link</a></li>
										<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
										<ul class="dropdown-menu">
											<li><a href="#">Action</a></li>
											<li><a href="#">Another action</a></li>
											<li><a href="#">Something else here</a></li>
											<li class="divider"></li>
											<li class="nav-header">Nav header</li>
											<li><a href="#">Separated link</a></li>
											<li><a href="#">One more separated link</a></li>
										</ul>
										</li>
									</ul>
									<form class="navbar-search pull-left" action="">
										<input type="text" class="search-query span2" placeholder="Search">
									</form>
									<ul class="nav pull-right">
										<li><a href="#">Link</a></li>
										<li class="divider-vertical"></li>
										<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
										<ul class="dropdown-menu">
											<li><a href="#">Action</a></li>
											<li><a href="#">Another action</a></li>
											<li><a href="#">Something else here</a></li>
											<li class="divider"></li>
											<li><a href="#">Separated link</a></li>
										</ul>
										</li>
									</ul>
								</div><!-- /.nav-collapse -->
							</div>
						</div><!-- /navbar-inner -->
					</div><!-- /navbar -->
					<!--</div>-->

				<div class="container">

					<!--span2 + span10 that's really content-->
					<div class="row">

						<!--left nav-->
						<div class="span3 side-nav">
							<div class="well sidebar-nav">
								<h3><a href="c.html">Cpp</a></h3>

								<ul class="nav nav-pills nav-stacked">
									<li> <a href="cpp_stl_map_detail.html">c++ stl map详解</a></li>
									<li> <a href="cpp_stl_map_key_by_struct.html">c++ stl map自定义类做为键值</a></li>
									<li> <a href="cpp_about_inline_detail.html">c++ 有关inline的解释</a></li>
									<li> <a href="cpp_string.html">c++ string类</a></li>
									<li> <a href="cpp_map_detail.html">stl 中 map 用法详解</a></li>
									<li> <a href="cpp_switch_case_jump_error.html">switch error jump to case label</a></li>
								</ul>
							</div> <!-- ...well -->
						</div> <!-- --span  -->

						<!-- right contnet -->

						<div class="span9" data-spy="scroll" >
							<div class="gsearch"></div>
							<div class="content">
								<div class="alert top-nav"><a href="index.html">首页</a>&nbsp;&gt;&nbsp;<a href="cpp.html">cpp</a></div>
								
<h1>c++ string类</h1>
<div class="toc">
<ul>
<li><a href="#toc_0.0.0.1">string类的构造函数：</a>
<li><a href="#toc_0.0.0.2">string类的字符操作：</a>
<li><a href="#toc_0.0.0.3">string的特性描述:</a>
<li><a href="#toc_0.0.0.4">string类的输入输出操作:</a>
</ul>
</ul>
</ul>
</ul>
</div>

<h4 id="toc_0.0.0.1">string类的构造函数：</h4>

<ul>
<li>
<code>string(const char *s);</code> //用c字符串s初始化<br />

<li>
<code>string(int n,char c);</code> //用n个字符c初始化<br />

<li>
此外，string类还支持默认构造函数和复制构造函数，如string s1；string s2="hello"；都是正确的写法。<br />

<li>
当构造的string太长而无法表达时会抛出length_error异常.<br />

</ul>

<h4 id="toc_0.0.0.2">string类的字符操作：</h4>

<ul>
<li>
<code>const char &amp;operator[](int n)const;</code><br />

<li>
<code>const char &amp;at(int n)const;</code> <br />

<li>
<code>char &amp;operator[](int n);</code> <br />

<li>
<code>char &amp;at(int n);</code> <br />

<li>
<code>operator[]</code> 和 <code>at()</code> 均返回当前字符串中第n个字符的位置，但at函数提供范围检查，当越界时会抛出out_of_range异常，下标运算符 <code>[]</code> 不提供检查访问。<br />

<li>
<code>const char *data()const;</code> //返回一个非null终止的c字符数组<br />

<li>
<code>const char *c_str()const;</code> //返回一个以null终止的c字符串<br />

<li>
<code>int copy(char *s, int n, int pos = 0) const;</code> //把当前串中以pos开始的n个字符拷贝到以s为起始位置的字符数组中，返回实际拷贝的数目<br />

</ul>

<h4 id="toc_0.0.0.3">string的特性描述:</h4>

<p>
int capacity()const; //返回当前容量（即string中不必增加内存即可存放的元素个数）
int max_size()const; //返回string对象中可存放的最大字符串的长度
int size()const; //返回当前字符串的大小
int length()const; //返回当前字符串的长度
bool empty()const; //当前字符串是否为空
void resize(int len,char c);//把字符串当前大小置为len，并用字符c填充不足的部分
</p>

<h4 id="toc_0.0.0.4">string类的输入输出操作:</h4>


<p>
string类重载运算符operator&amp;gt;&amp;gt;用于输入，同样重载运算符operator&amp;lt;&amp;lt;用于输出操作。
函数getline(istream &amp;in,string &amp;s);用于从输入流in中读取字符串到s中，以换行符'\n'分开。
</p>


<p>
string的赋值：
</p>


<p>
string &amp;operator=(const string &amp;s);//把字符串s赋给当前字符串
string &amp;assign(const char *s);//用c类型字符串s赋值
string &amp;assign(const char *s,int n);//用c字符串s开始的n个字符赋值
string &amp;assign(const string &amp;s);//把字符串s赋给当前字符串
string &amp;assign(int n,char c);//用n个字符c赋值给当前字符串
string &amp;assign(const string &amp;s,int start,int n);//把字符串s中从start开始的n个字符赋给当前字符串
string &amp;assign(const_iterator first,const_itertor last);//把first和last迭代器之间的部分赋给字符串
</p>


<p>
string的连接：
</p>


<p>
string &amp;operator+=(const string &amp;s);//把字符串s连接到当前字符串的结尾 
string &amp;append(const char *s); //把c类型字符串s连接到当前字符串结尾
string &amp;append(const char *s,int n);//把c类型字符串s的前n个字符连接到当前字符串结尾
string &amp;append(const string &amp;s); //同operator+=()
string &amp;append(const string &amp;s,int pos,int n);//把字符串s中从pos开始的n个字符连接到当前字符串的结尾
string &amp;append(int n,char c); //在当前字符串结尾添加n个字符c
string &amp;append(const_iterator first,const_iterator last);//把迭代器first和last之间的部分连接到当前字符串的结尾
</p>


<p>
string的比较：
</p>


<p>
bool operator==(const string &amp;s1,const string &amp;s2)const;//比较两个字符串是否相等
运算符"&amp;gt;","&amp;lt;","&amp;gt;=","&amp;lt;=","!="均被重载用于字符串的比较；
int compare(const string &amp;s) const;//比较当前字符串和s的大小
int compare(int pos, int n,const string &amp;s)const;//比较当前字符串从pos开始的n个字符组成的字符串与s的大小
int compare(int pos, int n,const string &amp;s,int pos2,int n2)const;//比较当前字符串从pos开始的n个字符组成的字符串与s中pos2开始的n2个字符组成的字符串的大小
int compare(const char *s) const;
int compare(int pos, int n,const char *s) const;
int compare(int pos, int n,const char *s, int pos2) const;
compare函数在&amp;gt;时返回1，&amp;lt;时返回-1，==时返回0
</p>

<p>
string的子串：
</p>


<p>
string substr(int pos = 0,int n = npos) const;//返回pos开始的n个字符组成的字符串
</p>


<p>
string的交换：
</p>


<p>
void swap(string &amp;s2); //交换当前字符串与s2的值
</p>

 


<p>
string类的查找函数：
</p>

<p>
int find(char c, int pos = 0) const;//从pos开始查找字符c在当前字符串的位置
int find(const char *s, int pos = 0) const;//从pos开始查找字符串s在当前串中的位置
int find(const char *s, int pos, int n) const;//从pos开始查找字符串s中前n个字符在当前串中的位置
int find(const string &amp;s, int pos = 0) const;//从pos开始查找字符串s在当前串中的位置
//查找成功时返回所在位置，失败返回string::npos的值
</p>

<p>
int rfind(char c, int pos = npos) const;//从pos开始从后向前查找字符c在当前串中的位置
int rfind(const char *s, int pos = npos) const;
int rfind(const char *s, int pos, int n = npos) const;
int rfind(const string &amp;s,int pos = npos) const;
//从pos开始从后向前查找字符串s中前n个字符组成的字符串在当前串中的位置，成功返回所在位置，失败时返回string::npos的值
</p>

<p>
int find_first_of(char c, int pos = 0) const;//从pos开始查找字符c第一次出现的位置
int find_first_of(const char *s, int pos = 0) const;
int find_first_of(const char *s, int pos, int n) const;
int find_first_of(const string &amp;s,int pos = 0) const;
//从pos开始查找当前串中第一个在s的前n个字符组成的数组里的字符的位置。查找失败返回string::npos
</p>

<p>
int find_first_not_of(char c, int pos = 0) const;
int find_first_not_of(const char *s, int pos = 0) const;
int find_first_not_of(const char *s, int pos,int n) const;
int find_first_not_of(const string &amp;s,int pos = 0) const;
//从当前串中查找第一个不在串s中的字符出现的位置，失败返回string::npos
</p>

<p>
int find_last_of(char c, int pos = npos) const;
int find_last_of(const char *s, int pos = npos) const;
int find_last_of(const char *s, int pos, int n = npos) const;
int find_last_of(const string &amp;s,int pos = npos) const;
</p>

<p>
int find_last_not_of(char c, int pos = npos) const;
int find_last_not_of(const char *s, int pos = npos) const;
int find_last_not_of(const char *s, int pos, int n) const;
int find_last_not_of(const string &amp;s,int pos = npos) const;
//find_last_of和find_last_not_of与find_first_of和find_first_not_of相似，只不过是从后向前查找
</p>

 


<p>
string类的替换函数：
</p>

<p>
string &amp;replace(int p0, int n0,const char *s);//删除从p0开始的n0个字符，然后在p0处插入串s
string &amp;replace(int p0, int n0,const char *s, int n);//删除p0开始的n0个字符，然后在p0处插入字符串s的前n个字符
string &amp;replace(int p0, int n0,const string &amp;s);//删除从p0开始的n0个字符，然后在p0处插入串s
string &amp;replace(int p0, int n0,const string &amp;s, int pos, int n);//删除p0开始的n0个字符，然后在p0处插入串s中从pos开始的n个字符
string &amp;replace(int p0, int n0,int n, char c);//删除p0开始的n0个字符，然后在p0处插入n个字符c
string &amp;replace(iterator first0, iterator last0,const char *s);//把[first0，last0）之间的部分替换为字符串s
string &amp;replace(iterator first0, iterator last0,const char *s, int n);//把[first0，last0）之间的部分替换为s的前n个字符
string &amp;replace(iterator first0, iterator last0,const string &amp;s);//把[first0，last0）之间的部分替换为串s
string &amp;replace(iterator first0, iterator last0,int n, char c);//把[first0，last0）之间的部分替换为n个字符c
string &amp;replace(iterator first0, iterator last0,const_iterator first, const_iterator last);//把[first0，last0）之间的部分替换成[first，last）之间的字符串
</p>

<p>
string类的插入函数：
</p>

<p>
string &amp;insert(int p0, const char *s);
string &amp;insert(int p0, const char *s, int n);
string &amp;insert(int p0,const string &amp;s);
string &amp;insert(int p0,const string &amp;s, int pos, int n);
//前4个函数在p0位置插入字符串s中pos开始的前n个字符
string &amp;insert(int p0, int n, char c);//此函数在p0处插入n个字符c
iterator insert(iterator it, char c);//在it处插入字符c，返回插入后迭代器的位置
void insert(iterator it, const_iterator first, const_iterator last);//在it处插入[first，last）之间的字符
void insert(iterator it, int n, char c);//在it处插入n个字符c
</p>


<p>
string类的删除函数
</p>

<p>
iterator erase(iterator first, iterator last);//删除[first，last）之间的所有字符，返回删除后迭代器的位置
iterator erase(iterator it);//删除it指向的字符，返回删除后迭代器的位置
string &amp;erase(int pos = 0, int n = npos);//删除pos开始的n个字符，返回修改后的字符串
</p>

 


<p>
string类的迭代器处理：
</p>

<p>
string类提供了向前和向后遍历的迭代器iterator，迭代器提供了访问各个字符的语法，类似于指针操作，迭代器不检查范围。
用string::iterator或string::const_iterator声明迭代器变量，const_iterator不允许改变迭代的内容。常用迭代器函数有：
const_iterator begin()const;
iterator begin(); //返回string的起始位置
const_iterator end()const;
iterator end(); //返回string的最后一个字符后面的位置
const_iterator rbegin()const;
iterator rbegin(); //返回string的最后一个字符的位置
const_iterator rend()const;
iterator rend(); //返回string第一个字符位置的前面
rbegin和rend用于从后向前的迭代访问，通过设置迭代器string::reverse_iterator,string::const_reverse_iterator实现
</p>

 


<p>
字符串流处理：
</p>

<p>
通过定义ostringstream和istringstream变量实现，&amp;lt;sstream&amp;gt;头文件中
例如：
string input("hello,this is a test");
istringstream is(input);
string s1,s2,s3,s4;
is&amp;gt;&amp;gt;s1&amp;gt;&amp;gt;s2&amp;gt;&amp;gt;s3&amp;gt;&amp;gt;s4;//s1="hello,this",s2="is",s3="a",s4="test"
ostringstream os;
os&amp;lt;&amp;lt;s1&amp;lt;&amp;lt;s2&amp;lt;&amp;lt;s3&amp;lt;&amp;lt;s4;
cout&amp;lt;&amp;lt;os.str();
</p>

<p>
如果开发人员采用VC做工具，string , CString , char *经常需要互相转换。尤其是在Socket通信的包解析过程中和数据库同时打交道时，非常频繁。
</p>

<p>
CString的内部结构在MFC基础书中都会有，那么，这里不解释原因的给出以下几个转换示例。以便在工程中使用:
</p>

<p>
(1)string --&amp;gt; char *
</p>

<p>
string str("OK");
</p>

<p>
char * p = str.c_str();
</p>

<p>
(2)char * --&amp;gt;CString
</p>

<p>
char *p ="OK";
</p>

<p>
CString m_Str(p);
</p>

<p>
(3)CString --&amp;gt; char *
</p>


<p>
CString str("OK");
</p>

<p>
char * p = str.GetBuffer(str.GetLength());
</p>

<p>
(4)char * --&amp;gt;string
</p>

<p>
char *p  = "OK";
string str(p);
</p>

<p>
referenced from xiaocao000 's blog , thanks to original author!
</p>

							</div>
						</div>
					</div> <!-- really content end -->

					<div class="row footer">
						<hr />
						<a href="index.html">首页</a>
						<a href="about.html"> | 关于</a>
						<a href="links.html"> | 链接</a>
						<a href="contact.html"> | 链接</a>
					</div>

				</div>

				<!-- Le javascript ================================================== -->
				<!-- Placed at the end of the document so the pages load faster -->
				<!-- display by liw <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>-->
				<!--<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>-->
				<script src="assets/js/jquery.js"></script>
				<script src="assets/js/google-code-prettify/prettify.js"></script>
				<script src="assets/js/bootstrap-transition.js"></script>
				<script src="assets/js/bootstrap-alert.js"></script>
				<script src="assets/js/bootstrap-modal.js"></script>
				<script src="assets/js/bootstrap-dropdown.js"></script>
				<script src="assets/js/bootstrap-scrollspy.js"></script>
				<script src="assets/js/bootstrap-tab.js"></script>
				<script src="assets/js/bootstrap-tooltip.js"></script>
				<script src="assets/js/bootstrap-popover.js"></script>
				<script src="assets/js/bootstrap-button.js"></script>
				<script src="assets/js/bootstrap-collapse.js"></script>
				<script src="assets/js/bootstrap-carousel.js"></script>
				<script src="assets/js/bootstrap-typeahead.js"></script>
				<script src="assets/js/application.js"></script>
				<script src="assets/js/liwei.js"></script>


			</body>
		</html>
